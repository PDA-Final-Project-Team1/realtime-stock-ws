# WebSocket μ£Όμ‹ μ²΄κ²°κ°€ & νΈκ°€ μ„λ²„

μ΄ ν”„λ΅μ νΈλ” **Node.js**, **Express**, **WebSocket**μ„ μ‚¬μ©ν•μ—¬ **μ‹¤μ‹κ°„ μ£Όμ‹ μ²΄κ²°κ°€ λ° νΈκ°€ λ°μ΄ν„°**λ¥Ό μ κ³µν•λ” μ„λ²„μ…λ‹λ‹¤.

## π€ μ£Όμ” κΈ°λ¥

- μ‹¤μ‹κ°„ μ£Όμ‹ μ²΄κ²°κ°€ λ° νΈκ°€ λ°μ΄ν„°λ¥Ό WebSocketμ„ ν†µν•΄ μ κ³µ
- μ΄λ‹Ή 100κ°μ λλ¤ μ£Όμ‹ λ°μ΄ν„°λ¥Ό μ „μ†΅
- λ‹¤μ¤‘ ν΄λΌμ΄μ–ΈνΈ μ—°κ²° μ§€μ›
- JSONμ΄ μ•„λ‹ λ¬Έμμ—΄ ν¬λ§·μΌλ΅ λ°μ΄ν„° μ κ³µ

## π“ μ„¤μΉ λ°©λ²•

1. λ ν¬μ§€ν† λ¦¬ ν΄λ΅ 

   ```sh
   git clone https://github.com/your-repo/ws-stock-stream.git
   cd ws-stock-stream
   ```

2. ν¨ν‚¤μ§€ μ„¤μΉ
   ```sh
   npm install
   ```

## β–¶οΈ μ‹¤ν–‰ λ°©λ²•

### μ„λ²„ μ‹¤ν–‰ (1) - currentPrice.js

### tr_id: H0STCNT0

### port: 3000

```sh
node currentPrice.js
```

### μ„λ²„ μ‹¤ν–‰ (2) - askingPrice.js

### tr_id: H0STASP0

### port: 3001

```sh
node askingPrice.js
```

## π’΅ WebSocket μ‚¬μ© μμ  (JavaScript)

```javascript
const ws = new WebSocket("ws://localhost:3000");

ws.onopen = () => {
  ws.send(JSON.stringify({ tr_id: "H0STCNT0", tr_key: "005930" }));
};

ws.onmessage = (event) => {
  console.log("μμ‹ λ λ°μ΄ν„°:", event.data);
};

ws.onclose = () => {
  console.log("μ—°κ²° μΆ…λ£");
};
```

## π”¥ WebSocket μ‘λ‹µ ν¬λ§·

### **1. μ‹¤μ‹κ°„ μ²΄κ²°κ°€ λ°μ΄ν„°** (`currentPrice.js`)

μ„λ²„μ—μ„ μ „μ†΅ν•λ” λ°μ΄ν„°λ” μ•„λμ™€ κ°™μ€ **λ¬Έμμ—΄ ν¬λ§·**μ„ λ”°λ¦…λ‹λ‹¤.

```
{μΆ…λ©μ½”λ“}^{μ‹κ°„}^{μ²΄κ²°κ°€}^5^{μ „μΌλ€λΉ„}^μ „μΌλ€λΉ„μ¨
```

μμ  μ‘λ‹µ:

```
005930^093354^71900^5^-100^-0.14
```

### **2. μ‹¤μ‹κ°„ νΈκ°€ λ°μ΄ν„°** (`askingPrice.js`)

νΈκ°€ λ°μ΄ν„°λ” μ•„λμ™€ κ°™μ€ ν•μ‹μΌλ΅ μ „μ†΅λ©λ‹λ‹¤.

```
{μΆ…λ©μ½”λ“}^{μ‹κ°„}^{μ•”νΈν™”μ—¬λ¶€}^{λ§¤λ„νΈκ°€1}^...^{λ§¤λ„νΈκ°€10}^{λ§¤μνΈκ°€1}^...^{λ§¤μνΈκ°€10}^{μ΄ λ§¤λ„νΈκ°€ μ”λ‰}^{μ΄ λ§¤μνΈκ°€ μ”λ‰}^{μμƒ μ²΄κ²°κ°€}^{μμƒ μ²΄κ²°λ‰}^{λ„μ  κ±°λλ‰}
```

μμ  μ‘λ‹µ:

```
005930^093730^0^71900^72000^72100^72200^72300^72400^72500^72600^72700^72800^71800^71700^71600^71500^71400^71300^71200^71100^71000^70900^91918^117942^92673^79708^106729^141988^176192^113906^134077^104229^95221^159371^220746^284657^212742^195370^182710^209747^376432^158171^1159362^2095167^0^0^0^0^525579^-72000^5^-100.00^3159115^0^8^0^0^0
```

### **3. μ‹¤μ‹κ°„ μ²΄κ²°κ°€ & νΈκ°€** (`price.js`)

## 1κ³Ό 2 νΌν•©

## π“ λΌμ΄μ„ μ¤

μ΄ ν”„λ΅μ νΈλ” MIT λΌμ΄μ„ μ¤λ¥Ό λ”°λ¦…λ‹λ‹¤.
